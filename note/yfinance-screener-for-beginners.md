# 日本株3700社以上を簡単分析！初心者でもできる株式スクリーニングツールの使い方

## はじめに

いきなりですが。
海外旅行したり働き始めたりすると、日本の良さが身に染みたと感じた人は多いんじゃないでしょうか？
なんかとりあえず外で働いてみたいと思っていましたが、今はいつ戻るかと考える日々です。（とにかく温泉に入りたい）

また色々と各国を回る中で、日本企業ってアジア圏や他の国にもかなり進出してるんだなぁと実感しました。（そりゃそう）

そんなこんなで日本株に興味を持ち、昨年に[わが投資術](https://amzn.to/3IEVRkq)を購入して実践し始めました。（まだ初めて一年目なので成績はわかりません。。。が、マイナスは無し）

自分でバフェットコードなどを利用しながらスクリーニングしてみましたが、毎回決算が出るたびに手動で調べるのも何かなぁ。と思いまして。

じゃあ自動収集とスクリーニング用のツールを作ってみよう。

そんなノリから、**日本株全銘柄を自動収集・簡易スクリーニングできるツール**を開発しました。

この記事では、**プログラミングの知識がなくても使える方法**を、できるだけ詳しく、スクリーンショット付きで説明します。

## このツールでできること

![サンプル画像](/images/python-yfinance-4c4331412bc50f/img_sample2.png)

**主な機能:**

- 📈 日本の上場企業約3,795社の財務データを自動取得
- 🔍 「わが投資術」に沿った条件で株をフィルタリング
- 📊 PBR、ROE、自己資本比率などの指標で検索
- 💰 時価総額、営業利益、ネットキャッシュなどで絞り込み

## 「わが投資術」とは？

[わが投資術](https://amzn.to/3IEVRkq)では、**シンプルな指標**で割安株を見つける手法が紹介されています：

- **時価総額**: 500億以下
- **PBR**: 1倍以下
- **PER**: 10倍以下
- **ネットキャッシュ**: （流動資産＋投資有価証券 ×70％）－負債
- **ネットキャッシュ比率**: ネットキャッシュ/時価総額

このツールを使えば、これらの条件で日本株を簡単に絞り込むことができます。

---

# 準備：必要なものをインストールする

このツールを使うには、まず「Docker（ドッカー）」というソフトをパソコンにインストールする必要があります。

## Dockerって何？

Dockerは、アプリケーションを簡単に動かすための便利なツールです。
難しいプログラミングの知識がなくても、ボタンを押すだけでツールを起動できるようになります。

## Dockerのインストール方法

### Windowsの場合

**スクリーンショット予定箇所①: Dockerダウンロードページ**

1. [Docker公式サイト](https://docs.docker.com/desktop/install/windows-install/)にアクセス
2. 「Docker Desktop for Windows」の「Download」ボタンをクリック
3. ダウンロードしたファイル（`Docker Desktop Installer.exe`）をダブルクリック
4. インストーラーの指示に従って「OK」や「Next」をクリック
5. インストールが完了したら、パソコンを再起動

**スクリーンショット予定箇所②: Dockerインストール画面**

6. 再起動後、Dockerが自動的に起動します
7. タスクバー（画面下）に クジラのアイコンが表示されれば成功です

**スクリーンショット予定箇所③: Dockerアイコン**

### Macの場合

**スクリーンショット予定箇所④: Mac用Dockerダウンロードページ**

1. [Docker公式サイト](https://docs.docker.com/desktop/install/mac-install/)にアクセス
2. 自分のMacのチップを確認します：
   - 画面左上のAppleマーク → 「このMacについて」をクリック
   - 「チップ」の欄を確認
   - 「Apple M1」「M2」などと書いてあれば → **Apple Silicon**版をダウンロード
   - 「Intel」と書いてあれば → **Intel Chip**版をダウンロード

**スクリーンショット予定箇所⑤: Macのチップ確認画面**

3. ダウンロードしたファイル（`Docker.dmg`）をダブルクリック
4. Dockerのアイコンを「Applications」フォルダにドラッグ&ドロップ
5. Launchpad（ロケットのアイコン）からDockerを起動
6. メニューバー（画面上部）にクジラのアイコンが表示されれば成功です

**スクリーンショット予定箇所⑥: Mac Dockerアイコン**

---

# 方法1: CSVファイルだけを手に入れる（アプリを使わない）

「とりあえずデータだけ欲しい」という方は、この方法が簡単です。
アプリを起動せずに、最新の株式データをCSVファイルとしてダウンロードできます。

## 手順1: GitHubにアクセスする

**スクリーンショット予定箇所⑦: GitHubリポジトリページ**

1. [yfinance-jp-screener](https://github.com/testkun08080/yfinance-jp-screener)のページを開く
2. 画面右上の「Fork」（フォーク）ボタンをクリック

**重要**: 必ず**プライベート（Private）**を選択してください

**スクリーンショット予定箇所⑧: Forkボタンとプライベート設定**

> **なぜプライベートにする必要があるの？**
>
> GitHubの無料プランでは、パブリック（公開）リポジトリだと自動実行の時間制限があります。
> プライベートにすることで、制限なく使えるようになります。

## 手順2: 自動実行の権限を設定する

**スクリーンショット予定箇所⑨: Settings画面**

1. フォークしたリポジトリのページで、「Settings」（設定）をクリック
2. 左側のメニューから「Actions」→「General」をクリック
3. 下にスクロールして、以下の設定を変更します：

**スクリーンショット予定箇所⑩: Actions権限設定**

- ✅ **"Read and write permissions"**（読み書き権限）を選択
- ✅ **"Allow GitHub Actions to create and approve pull requests"**（GitHub Actionsにプルリクエストの作成を許可）にチェック

4. 画面下の「Save」（保存）ボタンをクリック

## 手順3: データ収集を開始する

**スクリーンショット予定箇所⑪: Actionsタブ**

1. ページ上部の「Actions」タブをクリック
2. 左側のメニューから「Stock List Update」を選択
3. 「Run workflow」（ワークフローを実行）ボタンをクリック
4. 緑色の「Run workflow」ボタンをもう一度クリック

**スクリーンショット予定箇所⑫: Run workflowボタン**

5. 数秒待つと、実行が開始されます
6. 完了すると、緑色のチェックマークが表示されます

**スクリーンショット予定箇所⑬: 実行完了画面**

## 手順4: 全データを収集する

次に、実際の株式データを取得します。

**スクリーンショット予定箇所⑭: Sequential Part 1選択**

1. 左側のメニューから「📊 Sequential Stock Fetch - Part 1」を選択
2. 「Run workflow」ボタンをクリック
3. 緑色の「Run workflow」ボタンをもう一度クリック

すると、自動的に以下の順番で実行されます：

```
Part 1（約1,000社）
  ↓ 自動実行
Part 2（約1,000社）
  ↓ 自動実行
Part 3（約1,000社）
  ↓ 自動実行
Part 4（約795社）
  ↓ 自動実行
CSV結合（全データを1つのファイルにまとめる）
```

**⏰ 完了までの時間**: 約3〜4時間かかります。
気長に待ちましょう。コーヒーでも飲みながら。☕️

**スクリーンショット予定箇所⑮: 全ワークフロー実行中**

## 手順5: CSVファイルをダウンロードする

全ての実行が完了したら、データをダウンロードします。

**スクリーンショット予定箇所⑯: stock_listフォルダ**

1. リポジトリのトップページに戻る
2. 「stock_list」フォルダをクリック
3. 「Export」フォルダをクリック
4. `YYYYMMDD_combined.csv`というファイルを探す（YYYYMMDDは実行日）

**スクリーンショット予定箇所⑰: CSVダウンロード**

5. ファイル名をクリック
6. 「Download」ボタンをクリック

これで、約3,795社分の財務データが入ったCSVファイルが手に入ります！

Excelなどで開いて、自由に分析することができます。

---

# 方法2: アプリを使ってスクリーニングする

CSVファイルをダウンロードしたら、専用のアプリで簡単にスクリーニングできます。

## 手順1: ファイルをダウンロードする

**スクリーンショット予定箇所⑱: リポジトリトップページ**

1. [yfinance-jp-screener](https://github.com/testkun08080/yfinance-jp-screener)のページを開く
2. 緑色の「Code」ボタンをクリック
3. 「Download ZIP」を選択

**スクリーンショット予定箇所⑲: Download ZIPボタン**

4. ダウンロードしたZIPファイルを解凍（ダブルクリック）
5. 解凍されたフォルダを、わかりやすい場所（デスクトップなど）に移動

## 手順2: ターミナル（コマンドプロンプト）を開く

### Windowsの場合

**スクリーンショット予定箇所⑳: Windows検索バー**

1. キーボードの「Windowsキー」を押す
2. 「cmd」と入力
3. 「コマンドプロンプト」が表示されたら、Enterキーを押す

**スクリーンショット予定箇所㉑: コマンドプロンプト画面**

### Macの場合

**スクリーンショット予定箇所㉒: Spotlight検索**

1. キーボードの「Command（⌘）+ スペース」を押す
2. 「ターミナル」と入力
3. Enterキーを押す

**スクリーンショット予定箇所㉓: ターミナル画面**

## 手順3: フォルダに移動する

黒い画面（ターミナル/コマンドプロンプト）に、以下の文字を入力します。

### Windowsの場合

```
cd Desktop\yfinance-jp-screener-main
```

**解説**:
- `cd`は「Change Directory（フォルダを移動する）」という意味
- `Desktop`はデスクトップ
- `\`はフォルダの区切り
- フォルダ名が違う場合は、実際のフォルダ名に変更してください

**スクリーンショット予定箇所㉔: cdコマンド実行**

### Macの場合

```
cd Desktop/yfinance-jp-screener-main
```

**解説**:
- Macでは`\`ではなく`/`を使います
- それ以外はWindowsと同じです

入力したら、Enterキーを押してください。

## 手順4: 環境設定ファイルを作成する

次に、以下のコマンドを入力します。

### Windowsの場合

```
copy .env.example .env
```

**スクリーンショット予定箇所㉕: .env作成**

### Macの場合

```
cp .env.example .env
```

**解説**:
- これは設定ファイルのコピーを作る操作です
- `.env.example`というお手本ファイルを`.env`という名前でコピーします

## 手順5: アプリを起動する

いよいよアプリを起動します。以下のコマンドを入力してください。

```
docker-compose up
```

**スクリーンショット予定箇所㉖: docker-compose up実行**

入力してEnterキーを押すと、たくさんの文字が流れ始めます。
これは正常な動作なので、慌てないでください。

**初回起動時の注意**:
- 初めて起動する場合、約3〜4時間かかります
- これは約3,795社分のデータをダウンロードしているためです
- 2回目以降は、すぐに起動します

**スクリーンショット予定箇所㉗: 起動完了メッセージ**

「Frontend running on http://localhost:8000」のような文字が表示されたら完了です！

## 手順6: ブラウザでアプリを開く

**スクリーンショット予定箇所㉘: ブラウザでアプリ表示**

1. Google ChromeやSafariなどのブラウザを開く
2. アドレスバーに以下を入力：
   ```
   http://localhost:8000
   ```
   （`.env`ファイルで`PORT`を変更した場合は、その番号を使用）

3. アプリの画面が表示されます！

---

# アプリの使い方

## CSVファイルを読み込む

**スクリーンショット予定箇所㉙: ファイルアップロード画面**

アプリを開くと、以下のような画面が表示されます：

```
CSVファイルをドラッグ&ドロップ
または クリックして選択
```

### 方法1: ドラッグ&ドロップ

1. ダウンロードしたCSVファイルをマウスでつかむ（クリックしたまま）
2. そのまま画面の破線の枠の中に持っていく
3. マウスを離す

**スクリーンショット予定箇所㉚: ドラッグ&ドロップ操作**

### 方法2: クリックして選択

1. 破線の枠をクリック
2. ファイル選択画面が開く
3. CSVファイルを選んで「開く」をクリック

**スクリーンショット予定箇所㉛: ファイル選択ダイアログ**

ファイルが読み込まれると、データが表にずらっと表示されます！

**スクリーンショット予定箇所㉜: データテーブル表示**

## スクリーニング機能を使う

画面の左側に、たくさんの検索条件が並んでいます。

**スクリーンショット予定箇所㉝: フィルター全体**

### 基本的な検索

**1. 会社名で検索**

**スクリーンショット予定箇所㉞: 会社名検索**

- 「会社名検索」の欄に、会社名を入力
- 例: 「トヨタ」と入力すると、トヨタ関連の企業が表示されます

**2. 銘柄コードで検索**

**スクリーンショット予定箇所㉟: 銘柄コード検索**

- 「銘柄コード検索」の欄に、4桁の番号を入力
- 例: 「7203」と入力すると、トヨタ自動車が表示されます

**3. 業種で絞り込む**

**スクリーンショット予定箇所㊱: 業種選択**

- 「業種」の項目から、興味のある業種にチェック
- 複数選択できます
- 例: 「機械」と「電気機器」にチェック

**4. 市場で絞り込む**

**スクリーンショット予定箇所㊲: 市場選択**

- プライム、スタンダード、グロースから選択
- 複数選択できます

### 「わが投資術」の条件で検索する

**スクリーンショット予定箇所㊳: バリュエーション指標**

**時価総額で絞り込む（500億円以下）**

1. 「時価総額」の項目を探す
2. 「最大値（百万円）」の欄に「50000」と入力
   - 百万円単位なので、500億円 = 50,000百万円

**PBRで絞り込む（1倍以下）**

1. 「PBR」の項目を探す
2. 「最大値」の欄に「1」と入力

**PERで絞り込む（10倍以下）**

1. 「PER(会予)」の項目を探す
2. 「最大値」の欄に「10」と入力

**スクリーンショット予定箇所㊴: 業績・収益性指標**

**営業利益率で絞り込む**

1. 「営業利益率」の項目を探す
2. 「最小値（%）」の欄に「10」と入力（10%以上の企業を探す）

**自己資本比率で絞り込む**

1. 「自己資本比率」の項目を探す
2. 「最小値（%）」の欄に「40」と入力（40%以上の企業を探す）

**スクリーンショット予定箇所㊵: キャッシュ関連指標**

**ネットキャッシュ比率で絞り込む**

1. 「ネットキャッシュ比率」の項目を探す
2. 「最小値（%）」の欄に「30」と入力（ネットキャッシュが時価総額の30%以上）

### 検索結果を見る

**スクリーンショット予定箇所㊶: 検索結果テーブル**

条件を入力すると、リアルタイムで結果が絞り込まれます。

- 画面下のテーブルに、条件に合った企業だけが表示されます
- 表の列名をクリックすると、並び替えができます
  - 例: 「PBR」をクリックすると、PBRの低い順に並びます

**スクリーンショット予定箇所㊷: ソート機能**

### 検索条件をリセットする

**スクリーンショット予定箇所㊸: リセットボタン**

全ての条件をクリアしたい場合：

1. 画面下の「フィルタークリア」ボタンをクリック
2. 全ての条件がリセットされ、全データが表示されます

---

# よくある質問

## Q1: データはどのくらいの頻度で更新すればいいですか？

決算発表のタイミング（四半期ごと）に合わせて更新するのがおすすめです。
「方法1」の手順を繰り返せば、最新のデータを取得できます。

## Q2: アプリを終了したいときは？

ターミナル（コマンドプロンプト）の画面で、キーボードの「Ctrl + C」を押してください。
アプリが停止します。

**スクリーンショット予定箇所㊹: Ctrl+C実行**

## Q3: 次回からアプリを起動するには？

1. ターミナル（コマンドプロンプト）を開く
2. フォルダに移動（`cd Desktop/yfinance-jp-screener-main`）
3. `docker-compose up`を実行

初回のような長い待ち時間は不要で、すぐに起動します。

## Q4: エラーが出た場合は？

以下を試してください：

1. Dockerが起動しているか確認（タスクバー/メニューバーのクジラアイコン）
2. ターミナルを閉じて、もう一度開く
3. パソコンを再起動してみる

それでも解決しない場合は、[GitHub Issues](https://github.com/testkun08080/yfinance-jp-screener/issues)で質問してください。

## Q5: Macで「permission denied」と表示される

以下のコマンドを実行してください：

```
sudo docker-compose up
```

パスワードを求められたら、Macのログインパスワードを入力してください。

---

# 重要な注意事項

## ⚠️ データの取り扱いについて

このツールは**個人利用・研究・教育目的**でのみ使用してください。

- 取得したデータの正確性は保証されません
- 投資判断は必ずご自身の責任で行ってください
- このツールの使用による損失について、作者は一切の責任を負いません

**データの利用規約**:
- [Yahoo! Finance Terms of Service](https://legal.yahoo.com/us/en/yahoo/terms/otos/index.html)
- [Yahoo! Developer API Terms of Use](https://policies.yahoo.com/us/en/yahoo/terms/product-atos/apiforydn/index.htm)

---

# まとめ

この記事では、プログラミングの知識がなくても使える日本株スクリーニングツールの使い方を説明しました。

**2つの方法**:
1. **CSVだけ取得**: GitHubで自動実行して、データをダウンロード
2. **アプリで分析**: Dockerで起動して、ブラウザでスクリーニング

「わが投資術」に沿った条件で、簡単に割安株を見つけることができます。

もしこの記事が役立ったら、[コーヒー一杯ほど](https://buymeacoffee.com/testkun08080)もらえると最高です☕️

最後までお読みいただきありがとうございます。
何か質問や改善提案があれば、[GitHub Issues](https://github.com/testkun08080/yfinance-jp-screener/issues)やコメントでお待ちしています。

それでは🙏

---

**免責事項**: 投資判断は自己責任でお願いします。

**参考リンク**:
- [yfinance-jp-screener GitHub](https://github.com/testkun08080/yfinance-jp-screener)
- [わが投資術（Amazon）](https://amzn.to/3IEVRkq)
- [バフェットコード](https://www.buffett-code.com/)
